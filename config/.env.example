# ===================================================================
# üöÄ OGZ PRIME MASTER ENVIRONMENT CONFIGURATION
# ===================================================================
# SINGLE SOURCE OF TRUTH FOR ALL COMPONENTS
# Updated: 2025-08-03 - CONSOLIDATED FROM MULTIPLE .ENV FILES
# ===================================================================

# === CORE SYSTEM ===
NODE_ENV=production
WEBSOCKET_DOMAIN=ogzprime.com
USE_SSL=true
LOG_LEVEL=info
LOG_DIRECTORY=./logs
TESTING=true
FEATURE_FLAG=TESTING

# === POLYGON.IO API (LIVE MARKET DATA) ===
POLYGON_API_KEY=[REDACTED:api-key]

# === STRIPE PAYMENT PROCESSING ===
STRIPE_SECRET_KEY=[REDACTED:stripe-secret-token]

# === WEBSOCKET PORTS ===
DATA_WEBSOCKET_PORT=3001
GUI_WEBSOCKET_PORT=3002
CONTROL_WEBSOCKET_PORT=3003

# === API CONFIGURATION ===
API_PORT=8080
SSL_ENABLED=false

# === SECURITY ===
JWT_SECRET=ogzprime_jwt_secret_2025_houston_mission
API_USERNAME=admin
API_PASSWORD=your_secure_password

# === MOVER SYSTEM CONFIGURATION ===
MOVER_HTTP_PORT=4000
MOVER_WS_PORT=4001
BOT_WS_URL=wss://ogzprime.com/ws
MOVER_PERSONALITY=houston_focused
VOICE_ENABLED=true
AVATAR_ENABLED=false
MEMORY_DIR=./memory
ACCOUNT_BALANCE=10000
HOUSTON_TARGET=25000
MOVER_VPS_MODE=true

# === VOICE & VIDEO APIs ===
ELEVENLABS_API_KEY=[REDACTED:api-key]
ELEVENLABS_VOICE_ID=ZiBnaV7RQSq1EYzYoU9r
DID_API_KEY=ZXBpMTc3N0BnbWFpbC5jb20:JYWN8KlmU4kHD8amJ3XLt
DID_AVATAR_ID=your-avatar-id-here
AVATAR_IMAGE_URL=https://models.d-id.com/your-avatar-image.jpg

# === TRADING BOT CONFIGURATION ===
TRADING_MODE=SEMI_AGGRESSIVE
STARTING_BALANCE=10000
MAX_DRAWDOWN=18
RISK_PER_TRADE=1.5
PRIMARY_ASSET=BTC-USD
BTC_WALLET_ADDRESS=bc1qa3u5uj8saqvg7f0cmnhhfquph34scgxarw48fk
PATTERN_CONFIDENCE=0.03              # SCALPING MODE: Ultra-low threshold
EMERGENCY_CONFIDENCE=0.02            # SCALPING MODE: Hair-trigger entries
MAX_POSITION_SIZE=0.10                # SCALPING MODE: Larger positions for quick profits
STOP_LOSS_PERCENT=1.5                 # SCALPING MODE: Tight 1.5% stop for quick exits
TAKE_PROFIT_PERCENT=2.0               # SCALPING MODE: Fast 2% profit taking
TRAILING_STOP_PERCENT=3.0
MAX_DAILY_LOSS=10.0
TRADE_INTERVAL=900000  # 15 minutes = 300 trades per 3 days (matching working bot behavior)
PATTERN_UPDATE=15000
RISK_CHECK=10000
DATA_FRESHNESS_WINDOW=45000

# === FEATURE FLAGS ===
ENABLE_DYNAMIC_SIZING=true
ENABLE_VOLATILITY_SCALING=true
ENABLE_LEARNING=true
ENABLE_ARBITRAGE=true
ENABLE_HEDGING=true
ENABLE_SHORTS=false  # DISABLED PERMANENTLY - NO MARGIN TRADING ON CRYPTO

# === MODULE SYSTEM ===
USE_MODULE_AUTOLOADER=true
MODULE_AUTOLOADER_PATH=./core/ModuleAutoLoader.js
# CRITICAL: All new modules MUST use moduleautoloader for pathing
# NO HARDCODED DEPENDENCIES - use autoloader for all module imports

# === SSL SERVER CONFIGURATION ===
SSL_SERVER_HOST=0.0.0.0
SSL_SERVER_PORT=3010
OGZ_SSL_SERVER=true

# === NETWORK CONFIGURATION ===
PORT=3008
WS_PORT=3010
WS_HOST=127.0.0.1
USE_SSL=false
WEBSOCKET_DOMAIN=localhost

# === DATABASE (IF NEEDED) ===
DATABASE_URL=postgresql://ogzprime:Chunks73773@localhost/ogzprime_prod
REDIS_URL=redis://localhost:6379

# === SUPABASE CONFIGURATION ===
SUPABASE_URL=https://dbpuhvxbiedjqxeqdonw.supabase.co
SUPABASE_SERVICE_KEY=[REDACTED:jwt-token]
SUPABASE_ANON_KEY=your-supabase-anon-key-here

# === DOCKER & INFRASTRUCTURE ===
POSTGRES_PASSWORD=[REDACTED:password]
JWT_SECRET=ogzprime_jwt_secret_with_at_least_32_characters_2025_secure
REDIS_PASSWORD=ogzprime_redis_password_2025
GRAFANA_PASSWORD=[REDACTED:password]
API_EXTERNAL_URL=http://149.248.242.111:9999
SITE_URL=http://149.248.242.111:8080

# === ARCHON KNOWLEDGE MANAGER ===
ARCHON_API_KEY=your-archon-api-key-here

# === CLAUDE CODE INTEGRATION ===
CLAUDE_CODE_API_KEY=your-claude-code-api-key-here
ANTHROPIC_API_KEY=your-anthropic-api-key-here

# === GOOGLE/GEMINI API ===
GOOGLE_API_KEY=[REDACTED:api-key]
GEMINI_API_KEY=[REDACTED:api-key]

# === COINBASE API (FOR TRADING) ===
# This is the API Key Name (from Advanced Trade API)
COINBASE_API_KEY_NAME=organizations/62b8c0cf-a35b-489b-bc0f-3e7bf50b6d48/apiKeys/c55d14df-b441-4476-9072-86a082f32b24
# This is the EC Private Key for JWT signing
COINBASE_PRIVATE_KEY="-----BEGIN EC PRIVATE KEY-----\nMHcCAQEEIGoYSEE6vFAZqkn0XqV0aPOcL6FNLcrH4LKYOe96W31joAoGCCqGSM49\nAwEHoUQDQgAE5iaa77LOmm3j00yiQ4Yt/BfrYj7kzdaHJcZ2Gf5YfSJ+JPluFD1W\nwtZVPOXWKDTdYnvc700DIkMCWlPgiRulRg==\n-----END EC PRIVATE
KEY-----"
# Note: Advanced Trade API uses JWT with EC256 signing
# IP Allowlist: 149.28.69.117/32 (matches VPS)

# === LICENSING (IF NEEDED) ===
LICENSE_PUBLIC_KEY=ogzp_pub_key_placeholder
LICENSE_PRIVATE_KEY=ogzp_priv_key_placeholder
LICENSE_ENCRYPTION_KEY=your_32_char_encryption_key_here

# === MOBILE API (IF NEEDED) ===
MOBILE_SECRET=ogz-mobile-valhalla-key
MOBILE_PASSWORD=your_mobile_password_here

# === DISCORD NOTIFICATIONS (OPTIONAL) ===
DISCORD_STATS_WEBHOOK_URL=your_discord_webhook_url_here
DISCORD_STATUS_WEBHOOK_URL=your_discord_status_webhook_url_here

# === AI CLONE (MOVER) ===
MOVER_API_KEY=ZXBpMTc3N0BnbWFpbC5jb20:m-HqVVj_VPQdG87g4RRq4
MOVER_VOICE_API_KEY=[REDACTED:api-key]

# ===================================================================
# üéØ CRITICAL: THIS IS THE ONLY .ENV FILE IN THE PROJECT
# All components (bot, SSL server, mover, etc.) use this file
# ===================================================================
BTC_WALLET_ADDRESS=bc1qa3u5uj8saqvg7f0cmnhhfquph34scgxarw48fk
OLLAMA_ENABLED=false
ENABLE_PRICE_BROADCAST=true

# Trading Bot Tier - Controls feature availability
SUBSCRIPTION_TIER=ml
OLLAMA_URL=https://trance-sprint-bahrain-prospective.trycloudflare.com

KRAKEN_API_KEY=[REDACTED:api-key]
KRAKEN_API_SECRET=TwC2oHGWz8Pc/zOGGJD3m67244rmV4ocuzdJnzg07flSWbnTkNXifdl7zrHXEiZmmrjgQE9CO1rAAztSj8mWtA==

# === TRADING MODE CONTROL ===
# Set to 'true' for REAL MONEY trading, 'false' for paper/demo mode
LIVE_TRADING=false  # PAPER MODE FOR DEBUG TESTING

# BACKTEST MODE: Run bot against historical data to stress-test for bugs
BACKTEST_MODE=false  # DISABLED - LIVE PAPER TRADING NOW

# SCALPING MODE ACTIVE - Ultra-aggressive settings for profitability testing
MIN_TRADE_CONFIDENCE=0.03   # 3% = SUPER AGGRESSIVE SCALPING MODE

# === TRAI AI CO-FOUNDER ===
ENABLE_TRAI=true
ENABLE_TRAI=true
KRAKEN_API_KEY=JRBgXAPe1u2MR78mpt/n2cNepk9GcYBXIAn+jNphWBwo7QI4KD4PfHFJ
KRAKEN_API_SECRET=PVMlY614sYoa2yGcvGoBo5UJ2cA0vKI683Uavg8TjYGIKQmtP38n2p2FhQ1SHNZ+ZewXWEDUJ7jaAdfXTY8qIA==

# === TRAI DECISION MODULE (Change 574 + Process Pool Fix) ===
TRAI_MODE=advisory              # Start conservative: advisory|hybrid|autonomous
TRAI_WEIGHT=0.2                 # 20% TRAI influence
TRAI_VETO=false                 # No veto power initially
TRAI_MAX_RISK=0.03              # 3% max risk per trade
TRAI_MIN_CONF=0.08              # AGGRESSIVE - FORCE TRADES
TRAI_MAX_CONF=0.95              # Max 95% confidence
TRAI_ENABLE_LLM=true            # üî• RE-ENABLED (Change 579) - Persistent LLM server fixed timeouts! Model stays loaded in GPU RAM, 3-5s inference instead of 15s+.
TRAI_BACKTEST_MODE=post_analysis # Change 586: 'disabled' = no TRAI in backtest, 'enabled' = normal TRAI, 'post_analysis' = TRAI analyzes results only
TRAI_ENABLE_BACKTEST=true       # Change 593: Re-enabled for paper trading validation - need full TRAI analysis

# === WEBSOCKET SECURITY (Change 582) ===
WEBSOCKET_AUTH_TOKEN=39ccfbc54660e6075f07730285badebbc40d805748c8eeb7d7f2e32d15ae1c62  # üîí CRITICAL: Required for WebSocket authentication

# ===================================================================
# üéØ CENTRALIZED TRADING CONFIGURATION (Change 610)
# ===================================================================
# ALL trading parameters in ONE place - no more scattered hardcoded values!
# Organized by priority: Critical ‚Üí High ‚Üí Medium ‚Üí Low
# ===================================================================

# === PHASE 1: HIGH-PRIORITY RISK MANAGEMENT ===
# These directly affect profitability and risk - tune these first!

# Risk per trade (percentage of account balance)
MAX_RISK_PER_TRADE=0.02          # 2% - Maximum risk per single trade
# REMOVED - Using lines 66-67 instead (CHANGE 629)

# Trailing stops (let winners run!)
TRAILING_STOP_PERCENT=0.035      # 3.5% - Trailing stop distance (LOOSE for crypto volatility)
TRAILING_ACTIVATION=0.025        # 2.5% - Profit level to activate trailing stop
PROFIT_PROTECTION=0.015          # 1.5% - Minimum profit to lock in

# Breakeven withdrawal system (secure profits fast!)
BREAKEVEN_TRIGGER=0.005          # 0.5% - Profit level to trigger breakeven withdrawal
BREAKEVEN_EXIT_PERCENT=0.50      # 50% - Percentage of position to exit at breakeven
POST_BREAKEVEN_TRAIL=0.05        # 5% - Trailing stop after breakeven withdrawal (VERY LOOSE)

# === PHASE 1: HIGH-PRIORITY POSITION SIZING ===
BASE_POSITION_SIZE=0.01          # 1% - Base position size (of account balance)
MAX_POSITION_SIZE_PCT=0.05       # 5% - Maximum position size (overrides old MAX_POSITION_SIZE)

# Volatility-based position sizing
LOW_VOL_MULTIPLIER=1.5           # 1.5x - Increase size in low volatility
HIGH_VOL_MULTIPLIER=0.6          # 0.6x - Reduce size in high volatility
LOW_VOL_THRESHOLD=0.015          # 1.5% - Volatility threshold for "low"
HIGH_VOL_THRESHOLD=0.035         # 3.5% - Volatility threshold for "high"

# === PHASE 1: CONFIDENCE THRESHOLDS ===
# MIN_TRADE_CONFIDENCE=0.08      # Already defined above on line 178
MAX_CONFIDENCE=0.95              # 95% - Maximum confidence threshold
CONFIDENCE_PENALTY=0.1           # 10% - Reduce confidence after losses
CONFIDENCE_BOOST=0.05            # 5% - Increase confidence after wins

# === PHASE 1: FUND TARGET ===
FUND_TARGET=25000                # $25,000 - Houston fund target (overrides HOUSTON_TARGET)

# === PHASE 2: MAXPROFITMANAGER CONFIGURATION ===
# Advanced profit management - crypto-optimized "break even fast, then let it ride"

# REMOVED - Using STOP_LOSS_PERCENT instead (CHANGE 629)
MPM_BREAKEVEN_THRESHOLD=0.015    # 1.5% - Breakeven threshold (above 0.32% fees)
MIN_PROFIT_TRAIL=0.015           # 1.5% - Start trailing at breakeven (was 4%)

# Wide trailing stops for crypto (7-10% per user request)
TRAIL_DISTANCE=0.07              # 7% - Normal trail distance (let winners run!)
TIGHT_TRAIL_DISTANCE=0.10        # 10% - "Tight" trail (still wide for crypto)

# Tiered profit targets
TIER1_TARGET=0.02                # 2% - First tier (covers fees + profit)
TIER2_TARGET=0.04                # 4% - Second tier
TIER3_TARGET=0.06                # 6% - Third tier
FINAL_TARGET=0.10                # 10% - Final target (crypto can moon!)

# === PHASE 2: SCALPER CONFIGURATION ===
# Fee-aware micro-profit system for quick trades

SCALPER_MICRO_PROFIT=0.005       # 0.5% - Micro-profit target (fee-aware)
SCALPER_QUICK_PROFIT=0.008       # 0.8% - Quick profit target (fee-aware)
SCALPER_MOMENTUM_SHIFT=0.15      # 15% - Momentum loss triggers exit
SCALPER_STOP_MULTIPLIER=0.5      # 50% - Tighter stops for scalping
SCALPER_MAX_HOLD_TIME=300000     # 5 minutes (300 seconds) - Max hold time
MIN_HOLD_TIME_MINUTES=0.0         # SCALPING MODE: No minimum hold time!

# === PHASE 2: FEE CONFIGURATION ===
# Critical for profitability! Must exceed total fees to profit.

FEE_MAKER=0.0010                 # 0.10% - Maker fee (Kraken)
FEE_TAKER=0.0015                 # 0.15% - Taker fee (Kraken)
FEE_SLIPPAGE=0.0005              # 0.05% - Estimated slippage
FEE_TOTAL_ROUNDTRIP=0.0035       # 0.35% - Total cost per round trip (entry + exit)
FEE_SAFETY_BUFFER=0.001          # 0.10% - Safety buffer

# === PHASE 3: FIBONACCI DETECTOR ===
FIB_PROXIMITY=0.005              # 0.5% - Proximity threshold to be "at" a Fib level

# === PHASE 3: SUPPORT/RESISTANCE DETECTOR ===
SR_MIN_STRENGTH=3                # 3 touches - Minimum touches to be significant
SR_PROXIMITY=0.003               # 0.3% - Proximity threshold to be "at" a S/R level
SR_MAX_LEVELS=8                  # 8 levels - Track top 8 S/R levels

# ===================================================================
# üìù USAGE NOTES:
# - Adjust MIN_TRADE_CONFIDENCE to control trade frequency (0.08 = aggressive)
# - Increase TRAILING_STOP_PERCENT to give trades more room
# - Decrease BREAKEVEN_TRIGGER to secure profits faster
# - All percentages are decimals (0.02 = 2%)
# ===================================================================
